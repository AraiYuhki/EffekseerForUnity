jobs:
- job: BuildPkg

  pool: mac-mini

  steps:
  - script: |
      ./ci/build_android_plugin.sh

  - script: |
      ./ci/build_windows_plugin.sh

  - script: |
      ./ci/build_mac_plugin.sh

  - script: |
      ./ci/build_webgl_plugin.sh

  - script: |
      cd tests
      ./build_unity_pkg.sh
  - task: PublishBuildArtifacts@1
    inputs:
        PathtoPublish: './Effekseer.unitypackage'
        ArtifactName: 'package'
        publishLocation: 'Container'
  - script: |
      cd tests
      ./build_unity_android.sh
      dg deploy TestProject/Build/Android.apk
